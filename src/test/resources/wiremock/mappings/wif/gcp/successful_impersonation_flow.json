{
  "mappings": [
    {
      "request": {
        "urlPattern": "/computeMetadata/v1/instance/service-accounts/default/token",
        "method": "GET",
        "headers": {
          "Metadata-Flavor": {
            "equalTo": "Google"
          }
        }
      },
      "response": {
        "status": 200,
        "jsonBody": {"access_token":"randomToken123","expires_in":3599,"token_type":"Bearer"}
      }
    },
    {
      "request": {
        "urlPattern": "/v1/projects/-/serviceAccounts/targetServiceAccount:generateIdToken",
        "method": "POST",
        "bodyPatterns": [
          {
            "matchesJsonPath": {
              "expression": "$.delegates",
              "equalToJson": "[\"projects/-/serviceAccounts/delegate1\", \"projects/-/serviceAccounts/delegate2\"]"
            }
          },
          {
            "matchesJsonPath": {
              "expression": "$.audience",
              "equalTo": "snowflakecomputing.com"
            }
          }
        ]
      },
      "response": {
        "status": 200,
        "jsonBody": {"token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJpYXQiOjE3NDM2OTIwMTcsImV4cCI6MTc3NTIyODAxNCwiYXVkIjoid3d3LmV4YW1wbGUuY29tIiwic3ViIjoic29tZS1zdWJqZWN0In0.k7018udXQjw-sgVY8sTLTnNrnJoGwVpjE6HozZN-h0w"}
      }
    }
  ]
}
